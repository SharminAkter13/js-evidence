<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Study Background</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-xl p-6 sm:p-10">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-center text-gray-800 mb-8">
            Student Study Background
        </h1>

        <div id="education-entries-container" class="space-y-6 mb-8">
            <!-- Education entries will be rendered here by JavaScript -->
            <p id="no-entries-message" class="text-center text-gray-600 italic">
                No education entries yet. Click "Add New Education" to get started!
            </p>
        </div>

        <div class="text-center">
            <button
                id="add-education-btn"
                class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-200 ease-in-out"
            >
                Add New Education
            </button>
        </div>
    </div>

    <script>
        // Array to store all education entries
        let educationEntries = [];
        // Variable to keep track of the ID of the entry currently being edited
        let editingId = null;

        // Get references to DOM elements
        const educationContainer = document.getElementById('education-entries-container');
        const addEducationBtn = document.getElementById('add-education-btn');
        const noEntriesMessage = document.getElementById('no-entries-message');

        /**
         * Renders all education entries into the DOM.
         * Clears existing entries and re-renders from the `educationEntries` array.
         */
        function renderEducationEntries() {
            // Clear existing content
            educationContainer.innerHTML = '';

            if (educationEntries.length === 0) {
                noEntriesMessage.style.display = 'block'; // Show "No entries" message
                educationContainer.appendChild(noEntriesMessage);
            } else {
                noEntriesMessage.style.display = 'none'; // Hide "No entries" message
                educationEntries.forEach(entry => {
                    const entryElement = createEducationEntryElement(entry);
                    educationContainer.appendChild(entryElement);
                });
            }
        }

        /**
         * Creates a DOM element for a single education entry.
         * Switches between display mode and edit mode based on `editingId`.
         * @param {object} entry - The education entry object.
         * @returns {HTMLElement} The created DOM element.
         */
        function createEducationEntryElement(entry) {
            const div = document.createElement('div');
            div.className = 'bg-white border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow duration-200';
            div.dataset.id = entry.id; // Store ID on the element for easy access

            if (editingId === entry.id) {
                // Render in Edit Mode
                div.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${createInputFieldHtml('Level (e.g., SSC, HSC, Bachelor\'s)', 'level', entry.level, 'e.g., SSC')}
                        ${createInputFieldHtml('Degree/Exam Name', 'degree', entry.degree, 'e.g., Science, B.Sc. in CSE')}
                        ${createInputFieldHtml('Institution Name', 'institution', entry.institution, 'e.g., XYZ High School')}
                        ${createInputFieldHtml('Passing Year', 'passingYear', entry.passingYear, 'e.g., 2015', 'number')}
                        ${createInputFieldHtml('Result (GPA/CGPA/Division)', 'result', entry.result, 'e.g., GPA 5.00, CGPA 3.80')}
                        <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
                            <button data-action="save" class="px-4 py-2 bg-green-500 text-white font-medium rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-colors duration-200">
                                Save
                            </button>
                            <button data-action="cancel" class="px-4 py-2 bg-gray-400 text-white font-medium rounded-md hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200">
                                Cancel
                            </button>
                        </div>
                    </div>
                `;
                // Attach event listeners to the new buttons
                div.querySelector('[data-action="save"]').addEventListener('click', () => saveEducation(entry.id));
                div.querySelector('[data-action="cancel"]').addEventListener('click', () => cancelEditing());
            } else {
                // Render in Display Mode
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-bold text-gray-800">
                            ${entry.level || 'New Entry'}
                        </h3>
                        <div class="flex space-x-2">
                            <button data-action="edit" class="p-2 text-indigo-600 hover:text-indigo-800 rounded-full hover:bg-indigo-50 transition-colors" title="Edit">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-3.106 2.551a1 1 0 000 1.414l.914.914-2.828 2.828-1.414 1.414a1 1 0 01-1.414 0l-2.828-2.828a1 1 0 010-1.414l1.414-1.414 2.828-2.828.914-.914a1 1 0 001.414 0z" />
                                </svg>
                            </button>
                            <button data-action="delete" class="p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50 transition-colors" title="Delete">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clipRule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-700"><span class="font-semibold">Degree/Exam:</span> ${entry.degree || 'N/A'}</p>
                    <p class="text-gray-700"><span class="font-semibold">Institution:</span> ${entry.institution || 'N/A'}</p>
                    <p class="text-gray-700"><span class="font-semibold">Passing Year:</span> ${entry.passingYear || 'N/A'}</p>
                    <p class="text-gray-700"><span class="font-semibold">Result:</span> ${entry.result || 'N/A'}</p>
                `;
                // Attach event listeners to the new buttons
                div.querySelector('[data-action="edit"]').addEventListener('click', () => startEditing(entry.id));
                div.querySelector('[data-action="delete"]').addEventListener('click', () => deleteEducation(entry.id));
            }
            return div;
        }

        /**
         * Helper function to generate HTML for an input field.
         * @param {string} label - The label for the input field.
         * @param {string} name - The name attribute for the input.
         * @param {string} value - The current value of the input.
         * @param {string} placeholder - The placeholder text for the input.
         * @param {string} type - The input type (default 'text').
         * @returns {string} The HTML string for the input field.
         */
        function createInputFieldHtml(label, name, value, placeholder, type = 'text') {
            return `
                <div class="flex flex-col">
                    <label for="${name}-${editingId}" class="text-sm font-medium text-gray-700 mb-1">
                        ${label}
                    </label>
                    <input
                        type="${type}"
                        id="${name}-${editingId}"
                        name="${name}"
                        value="${value || ''}"
                        placeholder="${placeholder}"
                        class="p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
                    />
                </div>
            `;
        }

        /**
         * Adds a new empty education entry and sets it to editing mode.
         */
        function addEducation() {
            const newId = Date.now().toString(); // Simple unique ID
            const newEntry = {
                id: newId,
                level: '',
                degree: '',
                institution: '',
                passingYear: '',
                result: '',
            };
            educationEntries.push(newEntry);
            editingId = newId; // Set the new entry to be edited
            renderEducationEntries(); // Re-render to show the new entry in edit mode
        }

        /**
         * Sets a specific education entry to editing mode.
         * @param {string} id - The ID of the entry to edit.
         */
        function startEditing(id) {
            editingId = id;
            renderEducationEntries(); // Re-render to show the selected entry in edit mode
        }

        /**
         * Saves the changes from the edit form for a specific entry.
         * @param {string} id - The ID of the entry to save.
         */
        function saveEducation(id) {
            const entryElement = educationContainer.querySelector(`[data-id="${id}"]`);
            if (!entryElement) return;

            const updatedEntry = { id: id };
            // Collect updated data from input fields
            updatedEntry.level = entryElement.querySelector(`#level-${id}`).value;
            updatedEntry.degree = entryElement.querySelector(`#degree-${id}`).value;
            updatedEntry.institution = entryElement.querySelector(`#institution-${id}`).value;
            updatedEntry.passingYear = entryElement.querySelector(`#passingYear-${id}`).value;
            updatedEntry.result = entryElement.querySelector(`#result-${id}`).value;

            // Update the entry in the array
            educationEntries = educationEntries.map(entry =>
                entry.id === id ? updatedEntry : entry
            );

            editingId = null; // Exit editing mode
            renderEducationEntries(); // Re-render to show updated data in display mode
        }

        /**
         * Cancels the current editing session without saving changes.
         */
        function cancelEditing() {
            // If it was a newly added entry that was cancelled, remove it
            if (educationEntries.length > 0 && educationEntries[educationEntries.length - 1].id === editingId &&
                Object.values(educationEntries[educationEntries.length - 1]).every(val => val === '' || val === editingId)) {
                educationEntries.pop(); // Remove the empty new entry
            }
            editingId = null; // Exit editing mode
            renderEducationEntries(); // Re-render
        }

        /**
         * Deletes an education entry from the array.
         * @param {string} id - The ID of the entry to delete.
         */
        function deleteEducation(id) {
            // Use a confirmation dialog (custom modal recommended for production)
            if (confirm('Are you sure you want to delete this entry?')) {
                educationEntries = educationEntries.filter(entry => entry.id !== id);
                if (editingId === id) {
                    editingId = null; // If deleted item was being edited, stop editing
                }
                renderEducationEntries(); // Re-render
            }
        }

        // Add event listener for the "Add New Education" button
        addEducationBtn.addEventListener('click', addEducation);

        // Initial render when the page loads
        document.addEventListener('DOMContentLoaded', renderEducationEntries);
    </script>
</body>
</html>
